# Loads default set of integrations. Do not remove.
default_config:

homeassistant:
  external_url: "https://home-assistant.dmann.xyz"
  internal_url: "https://home-assistant.dmann.xyz"
  media_dirs: {}

http:
  ssl_certificate: /opt/home-assistant-tls/tls.crt
  ssl_key: /opt/home-assistant-tls/tls.key

logger:
  default: warning

homekit:
- name: HASS Bridge
  advertise_ip: !env_var HOME_ASSISTANT_INGRESS_PORT_21063_TCP_ADDR
  port: 21063
  filter:
    include_domains:
    - climate
    - light
    include_entity_globs:
    - binary_sensor.zone_*
- name: HASS Bridge - Security
  port: 21065
  advertise_ip: !env_var HOME_ASSISTANT_INGRESS_PORT_21065_TCP_ADDR
  mode: accessory
  filter:
    include_entities:
    - lock.front_door_lock

automation: !include automations.yaml
automation backups:
  - alias: "Backup Home Assistant every night at 3 AM"
    trigger:
      platform: time
      at: "03:00:00"
    action:
      alias: "Create backup now"
      service: backup.create
# This is no longer a thing, you *have* to use the UI ðŸ™ƒ
# mqtt:
#   broker: mqtt.dmann.xyz
#   port: 443
#   client_id: home-assistant-01
#   discovery: true
#   tls_insecure: false
#   certificate: /opt/home-assistant-tls/tls.crt
#   client_key: /opt/home-assistant-tls/tls.key
#   birth_message:
#     topic: 'homeassistant/status'
#     payload: 'online'
#   will_message:
#     topic: 'homeassistant/status'
#     payload: 'offline'
#  certificate: auto
# # Load frontend themes from the themes folder
# frontend:
#   themes: !include_dir_merge_named themes

# # Text to speech
# tts:
#   - platform: google_translate

# automation: !include automations.yaml
# script: !include scripts.yaml
# scene: !include scenes.yaml